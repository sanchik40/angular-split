{"version":3,"file":"angular-split.js","sources":["../../src/components/split.component.ts","../../src/components/splitArea.directive.ts","../../src/components/splitGutter.directive.ts","../../src/modules/angularSplit.module.ts"],"sourcesContent":["import { Component, ChangeDetectorRef, Input, Output, HostBinding, ChangeDetectionStrategy, \r\n    EventEmitter, Renderer2, OnDestroy, ElementRef, AfterViewInit, NgZone } from '@angular/core';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/debounceTime';\r\n\r\nimport { IArea } from './../interface/IArea';\r\nimport { IPoint } from './../interface/IPoint';\r\nimport { SplitAreaDirective } from './splitArea.directive';\r\n\r\n/**\r\n * angular-split\r\n * \r\n * Areas size are set in percentage of the split container.\r\n * Gutters size are set in pixels.\r\n * \r\n * So we set css 'flex-basis' property like this (where 0 <= area.size <= 1): \r\n *  calc( { area.size * 100 }% - { area.size * nbGutter * gutterSize }px );\r\n * \r\n * Examples with 3 visible areas and 2 gutters: \r\n * \r\n * |                     10px                   10px                                  |\r\n * |---------------------[]---------------------[]------------------------------------|\r\n * |  calc(20% - 4px)          calc(20% - 4px)              calc(60% - 12px)          |\r\n * \r\n * \r\n * |                          10px                        10px                        |\r\n * |--------------------------[]--------------------------[]--------------------------|\r\n * |  calc(33.33% - 6.667px)      calc(33.33% - 6.667px)      calc(33.33% - 6.667px)  |\r\n * \r\n * \r\n * |10px                                                  10px                        |\r\n * |[]----------------------------------------------------[]--------------------------|\r\n * |0                 calc(66.66% - 13.333px)                  calc(33%% - 6.667px)   |\r\n * \r\n * \r\n *  10px 10px                                                                         |\r\n * |[][]------------------------------------------------------------------------------|\r\n * |0 0                               calc(100% - 20px)                               |\r\n * \r\n */\r\n\r\n@Component({\r\n    selector: 'split',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    styles: [`\r\n        :host {\r\n            display: flex;\r\n            flex-wrap: nowrap;\r\n            justify-content: flex-start;\r\n            align-items: stretch;\r\n            overflow: hidden;\r\n            /* \r\n                Important to keep following rules even if overrided later by 'HostBinding' \r\n                because if [width] & [height] not provided, when build() is executed,\r\n                'HostBinding' hasn't been applied yet so code:\r\n                this.elRef.nativeElement[\"offsetHeight\"] gives wrong value!  \r\n             */\r\n            width: 100%;\r\n            height: 100%;   \r\n        }\r\n\r\n        split-gutter {\r\n            flex-grow: 0;\r\n            flex-shrink: 0;\r\n            background-position: center center;\r\n            background-repeat: no-repeat;\r\n        }\r\n    `],\r\n    template: `\r\n        <ng-content></ng-content>\r\n        <ng-template ngFor let-area [ngForOf]=\"displayedAreas\" let-index=\"index\" let-last=\"last\">\r\n            <split-gutter *ngIf=\"last === false\" \r\n                          [order]=\"index*2+1\"\r\n                          [direction]=\"direction\"\r\n                          [useTransition]=\"useTransition\"\r\n                          [size]=\"gutterSize\"\r\n                          [color]=\"gutterColor\"\r\n                          [imageH]=\"gutterImageH\"\r\n                          [imageV]=\"gutterImageV\"\r\n                          [disabled]=\"disabled\"\r\n                          (mousedown)=\"startDragging($event, index*2+1, index+1)\"\r\n                          (touchstart)=\"startDragging($event, index*2+1, index+1)\"></split-gutter>\r\n        </ng-template>`,\r\n})\r\nexport class SplitComponent implements AfterViewInit, OnDestroy {\r\n\r\n    private _direction: 'horizontal' | 'vertical' = 'horizontal';\r\n\r\n    @Input() set direction(v: 'horizontal' | 'vertical') {\r\n        v = (v === 'vertical') ? 'vertical' : 'horizontal';\r\n        this._direction = v;\r\n        \r\n        [...this.displayedAreas, ...this.hidedAreas].forEach(area => {\r\n            area.comp.setStyleVisibleAndDir(area.comp.visible, this.isDragging, this.direction);\r\n        });\r\n        \r\n        this.build(false, false);\r\n    }\r\n    \r\n    get direction(): 'horizontal' | 'vertical' {\r\n        return this._direction;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _useTransition: boolean = false;\r\n\r\n    @Input() set useTransition(v: boolean) {\r\n        v = (typeof(v) === 'boolean') ? v : (v === 'false' ? false : true);\r\n        this._useTransition = v;\r\n    }\r\n    \r\n    get useTransition(): boolean {\r\n        return this._useTransition;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _disabled: boolean = false;\r\n    \r\n    @Input() set disabled(v: boolean) {\r\n        v = (typeof(v) === 'boolean') ? v : (v === 'false' ? false : true);\r\n        this._disabled = v;\r\n\r\n        // Force repaint if modified from TS class (instead of the template)\r\n        this.cdRef.markForCheck();\r\n    }\r\n    \r\n    get disabled(): boolean {\r\n        return this._disabled;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _width: number | null = null;\r\n\r\n    @Input() set width(v: number | null) {\r\n        v = Number(v);\r\n        this._width = (!isNaN(v) && v > 0) ? v : null;\r\n        \r\n        this.build(false, false);\r\n    }\r\n    \r\n    get width(): number | null {\r\n        return this._width;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _height: number | null = null;\r\n\r\n    @Input() set height(v: number | null) {\r\n        v = Number(v);\r\n        this._height = (!isNaN(v) && v > 0) ? v : null;\r\n        \r\n        this.build(false, false);\r\n    }\r\n    \r\n    get height(): number | null {\r\n        return this._height;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _gutterSize: number = 11;\r\n\r\n    @Input() set gutterSize(v: number) {\r\n        v = Number(v);\r\n        this._gutterSize = (!isNaN(v) && v > 0) ? v : 11;\r\n\r\n        this.build(false, false);\r\n    }\r\n    \r\n    get gutterSize(): number {\r\n        return this._gutterSize;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _gutterColor: string = '';\r\n\r\n    @Input() set gutterColor(v: string) {\r\n        this._gutterColor = (typeof v === 'string' && v !== '') ? v : '';\r\n\r\n        // Force repaint if modified from TS class (instead of the template)\r\n        this.cdRef.markForCheck();\r\n    }\r\n    \r\n    get gutterColor(): string {\r\n        return this._gutterColor;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _gutterImageH: string = '';\r\n\r\n    @Input() set gutterImageH(v: string) {\r\n        this._gutterImageH = (typeof v === 'string' && v !== '') ? v : '';\r\n        \r\n        // Force repaint if modified from TS class (instead of the template)\r\n        this.cdRef.markForCheck();\r\n    }\r\n    \r\n    get gutterImageH(): string {\r\n        return this._gutterImageH;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _gutterImageV: string = '';\r\n\r\n    @Input() set gutterImageV(v: string) {\r\n        this._gutterImageV = (typeof v === 'string' && v !== '') ? v : '';\r\n\r\n        // Force repaint if modified from TS class (instead of the template)\r\n        this.cdRef.markForCheck();\r\n    }\r\n    \r\n    get gutterImageV(): string {\r\n        return this._gutterImageV;\r\n    }\r\n\r\n    ////\r\n\r\n    private _dir: 'ltr' | 'rtl' = 'ltr';\r\n    \r\n    @Input() set dir(v: 'ltr' | 'rtl') {\r\n        v = (v === 'rtl') ? 'rtl' : 'ltr';\r\n        this._dir = v;\r\n    }\r\n    \r\n    get dir(): 'ltr' | 'rtl' {\r\n        return this._dir;\r\n    }\r\n\r\n    ////\r\n\r\n    @Output() dragStart = new EventEmitter<{gutterNum: number, sizes: Array<number>}>(false);\r\n    @Output() dragProgress = new EventEmitter<{gutterNum: number, sizes: Array<number>}>(false);\r\n    @Output() dragEnd = new EventEmitter<{gutterNum: number, sizes: Array<number>}>(false);\r\n    @Output() gutterClick = new EventEmitter<{gutterNum: number, sizes: Array<number>}>(false);\r\n\r\n    private transitionEndInternal = new Subject<Array<number>>();\r\n    @Output() transitionEnd = (<Observable<Array<number>>> this.transitionEndInternal.asObservable()).debounceTime(20);\r\n\r\n    @HostBinding('style.flex-direction') get cssFlexdirection() {\r\n        return (this.direction === 'horizontal') ? 'row' : 'column';\r\n    }\r\n\r\n    @HostBinding('style.width') get cssWidth() {\r\n        return this.width ? `${ this.width }px` : '100%';\r\n    }\r\n\r\n    @HostBinding('style.height') get cssHeight() {\r\n        return this.height ? `${ this.height }px` : '100%';\r\n    }\r\n\r\n    @HostBinding('style.min-width') get cssMinwidth() {\r\n        return (this.direction === 'horizontal') ? `${ this.getNbGutters() * this.gutterSize }px` : null;\r\n    }\r\n\r\n    @HostBinding('style.min-height') get cssMinheight() {\r\n        return (this.direction === 'vertical') ? `${ this.getNbGutters() * this.gutterSize }px` : null;\r\n    }\r\n\r\n    public isViewInitialized: boolean = false;\r\n    private isDragging: boolean = false;\r\n    private draggingWithoutMove: boolean = false;\r\n    private currentGutterNum: number = 0;\r\n\r\n    public readonly displayedAreas: Array<IArea> = [];\r\n    private readonly hidedAreas: Array<IArea> = [];\r\n    \r\n    private readonly dragListeners: Array<Function> = [];\r\n    private readonly dragStartValues = {\r\n        sizePixelContainer: 0,\r\n        sizePixelA: 0,\r\n        sizePixelB: 0,\r\n        sizePercentA: 0,\r\n        sizePercentB: 0,\r\n    };\r\n\r\n    constructor(private ngZone: NgZone,\r\n                private elRef: ElementRef,\r\n                private cdRef: ChangeDetectorRef,\r\n                private renderer: Renderer2) {}\r\n\r\n    public ngAfterViewInit() {\r\n        this.isViewInitialized = true;\r\n    }\r\n\r\n    private getNbGutters(): number {\r\n        return this.displayedAreas.length - 1;\r\n    }\r\n\r\n    public addArea(comp: SplitAreaDirective): void {\r\n        const newArea: IArea = {\r\n            comp, \r\n            order: 0, \r\n            size: 0,\r\n        };\r\n\r\n        if(comp.visible === true) {\r\n            this.displayedAreas.push(newArea);\r\n        }\r\n        else {\r\n            this.hidedAreas.push(newArea);\r\n        }\r\n\r\n        comp.setStyleVisibleAndDir(comp.visible, this.isDragging, this.direction);\r\n\r\n        this.build(true, true);\r\n    }\r\n\r\n    public removeArea(comp: SplitAreaDirective): void {\r\n        if(this.displayedAreas.some(a => a.comp === comp)) {\r\n            const area = <IArea> this.displayedAreas.find(a => a.comp === comp)\r\n            this.displayedAreas.splice(this.displayedAreas.indexOf(area), 1);\r\n\r\n            this.build(true, true);\r\n        }\r\n        else if(this.hidedAreas.some(a => a.comp === comp)) {\r\n            const area = <IArea> this.hidedAreas.find(a => a.comp === comp)\r\n            this.hidedAreas.splice(this.hidedAreas.indexOf(area), 1);\r\n        }\r\n    }\r\n\r\n    public updateArea(comp: SplitAreaDirective, resetOrders: boolean, resetSizes: boolean): void {\r\n        // Only refresh if area is displayed (No need to check inside 'hidedAreas')\r\n        const item = this.displayedAreas.find(a => a.comp === comp);\r\n\r\n        if(item) {\r\n            this.build(resetOrders, resetSizes);\r\n        }\r\n    }\r\n\r\n    public showArea(comp: SplitAreaDirective): void {\r\n        const area = this.hidedAreas.find(a => a.comp === comp);\r\n\r\n        if(area) {\r\n            comp.setStyleVisibleAndDir(comp.visible, this.isDragging, this.direction);\r\n\r\n            const areas = this.hidedAreas.splice(this.hidedAreas.indexOf(area), 1);\r\n            this.displayedAreas.push(...areas);\r\n\r\n            this.build(true, true);\r\n        }\r\n    }\r\n\r\n    public hideArea(comp: SplitAreaDirective): void {\r\n        const area = this.displayedAreas.find(a => a.comp === comp);\r\n\r\n        if(area) {\r\n            comp.setStyleVisibleAndDir(comp.visible, this.isDragging, this.direction);\r\n\r\n            const areas = this.displayedAreas.splice(this.displayedAreas.indexOf(area), 1);\r\n            areas.forEach(area => {\r\n                area.order = 0;\r\n                area.size = 0;\r\n            })\r\n            this.hidedAreas.push(...areas);\r\n\r\n            this.build(true, true);\r\n        }\r\n    }\r\n\r\n    private build(resetOrders: boolean, resetSizes: boolean): void {\r\n        this.stopDragging();\r\n\r\n        // ¤ AREAS ORDER\r\n        \r\n        if(resetOrders === true) {    \r\n\r\n            // If user provided 'order' for each area, use it to sort them.\r\n            if(this.displayedAreas.every(a => a.comp.order !== null)) {\r\n                this.displayedAreas.sort((a, b) => (<number> a.comp.order) - (<number> b.comp.order));\r\n            }\r\n    \r\n            // Then set real order with multiples of 2, numbers between will be used by gutters.\r\n            this.displayedAreas.forEach((area, i) => {\r\n                area.order = i * 2;\r\n                area.comp.setStyleOrder(area.order);\r\n            });\r\n\r\n        }\r\n\r\n        // ¤ AREAS SIZE PERCENT\r\n        \r\n        if(resetSizes === true) {\r\n\r\n            const totalUserSize = <number> this.displayedAreas.reduce((total: number, s: IArea) => s.comp.size ? total + s.comp.size : total, 0);\r\n            \r\n            // If user provided 'size' for each area and total == 1, use it.\r\n            if(this.displayedAreas.every(a => a.comp.size !== null) && totalUserSize > .999 && totalUserSize < 1.001 ) {\r\n\r\n                this.displayedAreas.forEach(area => {\r\n                    area.size = <number> area.comp.size;\r\n                });\r\n            }\r\n            // Else set equal sizes for all areas.\r\n            else {\r\n                const size = 1 / this.displayedAreas.length;\r\n                \r\n                this.displayedAreas.forEach(area => {\r\n                    area.size = size;\r\n                });\r\n            }\r\n        }\r\n        \r\n        // ¤ \r\n        // If some real area sizes are less than gutterSize, \r\n        // set them to zero and dispatch size to others.\r\n\r\n        let percentToDispatch = 0;\r\n        \r\n        // Get container pixel size\r\n        let containerSizePixel = this.getNbGutters() * this.gutterSize;\r\n        if(this.direction === 'horizontal') {\r\n            containerSizePixel = this.width ? this.width : this.elRef.nativeElement['offsetWidth'];\r\n        }\r\n        else {\r\n            containerSizePixel = this.height ? this.height : this.elRef.nativeElement['offsetHeight'];\r\n        }\r\n\r\n        this.displayedAreas.forEach(area => {\r\n            if(area.size * containerSizePixel < this.gutterSize) {\r\n                percentToDispatch += area.size;\r\n                area.size = 0;\r\n            }\r\n        });\r\n        \r\n        if(percentToDispatch > 0 && this.displayedAreas.length > 0) {\r\n            const nbAreasNotZero = this.displayedAreas.filter(a => a.size !== 0).length;\r\n\r\n            if(nbAreasNotZero > 0) {\r\n                const percentToAdd = percentToDispatch / nbAreasNotZero;\r\n    \r\n                this.displayedAreas.filter(a => a.size !== 0).forEach(area => {\r\n                    area.size += percentToAdd;\r\n                });\r\n            }\r\n            // All area sizes (container percentage) are less than guterSize,\r\n            // It means containerSize < ngGutters * gutterSize\r\n            else {\r\n                this.displayedAreas[this.displayedAreas.length - 1].size = 1;\r\n            }\r\n        }\r\n\r\n\r\n        this.refreshStyleSizes();\r\n        this.cdRef.markForCheck();\r\n    }\r\n\r\n    private refreshStyleSizes(): void {\r\n        const sumGutterSize = this.getNbGutters() * this.gutterSize;\r\n\r\n        this.displayedAreas.forEach(area => {\r\n            area.comp.setStyleFlexbasis(`calc( ${ area.size * 100 }% - ${ area.size * sumGutterSize }px )`, this.isDragging);\r\n        });\r\n    }\r\n\r\n    public startDragging(startEvent: MouseEvent | TouchEvent, gutterOrder: number, gutterNum: number): void {\r\n        startEvent.preventDefault();\r\n\r\n        // Place code here to allow '(gutterClick)' event even if '[disabled]=\"true\"'.\r\n        this.currentGutterNum = gutterNum;\r\n        this.draggingWithoutMove = true;\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.dragListeners.push( this.renderer.listen('document', 'mouseup', (e: MouseEvent) => this.stopDragging()) );\r\n            this.dragListeners.push( this.renderer.listen('document', 'touchend', (e: TouchEvent) => this.stopDragging()) );\r\n            this.dragListeners.push( this.renderer.listen('document', 'touchcancel', (e: TouchEvent) => this.stopDragging()) );\r\n        });\r\n\r\n        if(this.disabled) {\r\n            return;\r\n        }\r\n\r\n        const areaA = this.displayedAreas.find(a => a.order === gutterOrder - 1);\r\n        const areaB = this.displayedAreas.find(a => a.order === gutterOrder + 1);\r\n        \r\n        if(!areaA || !areaB) {\r\n            return;\r\n        }\r\n\r\n        const prop = (this.direction === 'horizontal') ? 'offsetWidth' : 'offsetHeight';\r\n        this.dragStartValues.sizePixelContainer = this.elRef.nativeElement[prop];\r\n        this.dragStartValues.sizePixelA = areaA.comp.getSizePixel(prop);\r\n        this.dragStartValues.sizePixelB = areaB.comp.getSizePixel(prop);\r\n        this.dragStartValues.sizePercentA = areaA.size;\r\n        this.dragStartValues.sizePercentB = areaB.size;\r\n\r\n        let start: IPoint;\r\n        if(startEvent instanceof MouseEvent) {\r\n            start = {\r\n                x: startEvent.screenX,\r\n                y: startEvent.screenY,\r\n            };\r\n        }\r\n        else if(startEvent instanceof TouchEvent) {\r\n            start = {\r\n                x: startEvent.touches[0].screenX,\r\n                y: startEvent.touches[0].screenY,\r\n            };\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.dragListeners.push( this.renderer.listen('document', 'mousemove', (e: MouseEvent) => this.dragEvent(e, start, areaA, areaB)) );\r\n            this.dragListeners.push( this.renderer.listen('document', 'touchmove', (e: TouchEvent) => this.dragEvent(e, start, areaA, areaB)) );\r\n        });\r\n\r\n        areaA.comp.lockEvents();\r\n        areaB.comp.lockEvents();\r\n\r\n        this.isDragging = true;\r\n\r\n        this.notify('start');\r\n    }\r\n\r\n    private dragEvent(event: MouseEvent | TouchEvent, start: IPoint, areaA: IArea, areaB: IArea): void {\r\n        if(!this.isDragging) {\r\n            return;\r\n        }\r\n\r\n        let end: IPoint;\r\n        if(event instanceof MouseEvent) {\r\n            end = {\r\n                x: event.screenX,\r\n                y: event.screenY,\r\n            };\r\n        }\r\n        else if(event instanceof TouchEvent) {\r\n            end = {\r\n                x: event.touches[0].screenX,\r\n                y: event.touches[0].screenY,\r\n            };\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        \r\n        this.draggingWithoutMove = false;\r\n        this.drag(start, end, areaA, areaB);\r\n    }\r\n\r\n    private drag(start: IPoint, end: IPoint, areaA: IArea, areaB: IArea): void {\r\n\r\n        // ¤ AREAS SIZE PIXEL\r\n\r\n        const devicePixelRatio = window.devicePixelRatio || 1;\r\n        let offsetPixel = (this.direction === 'horizontal') ? (start.x - end.x) : (start.y - end.y);\r\n        offsetPixel = offsetPixel / devicePixelRatio;\r\n        \r\n        if(this.dir === 'rtl') {\r\n            offsetPixel = -offsetPixel;\r\n        }\r\n\r\n        let newSizePixelA = this.dragStartValues.sizePixelA - offsetPixel;\r\n        let newSizePixelB = this.dragStartValues.sizePixelB + offsetPixel;\r\n        let minAreaA = areaA.comp.minSize * 100;\r\n\t\tlet minAreaB = areaB.comp.minSize * 100;\r\n        \r\n        if(newSizePixelA < this.gutterSize && newSizePixelB < this.gutterSize) {\r\n            // WTF.. get out of here!\r\n            return;\r\n        }\r\n        // check for minSize\r\n        else if (newSizePixelA < minAreaA) {\r\n\t\t\tnewSizePixelB -= newSizePixelA - minAreaA;\r\n\t\t\tnewSizePixelA = minAreaA;\r\n\t\t}\r\n\t\telse if (newSizePixelB < minAreaB) {\r\n\t\t\tnewSizePixelA += newSizePixelB - minAreaB;\r\n\t\t\tnewSizePixelB = minAreaB;\r\n\t\t}\r\n        // end check for minsize\r\n\r\n        else if(newSizePixelA < this.gutterSize) {\r\n            newSizePixelB += newSizePixelA;\r\n            newSizePixelA = 0;\r\n        }\r\n        else if(newSizePixelB < this.gutterSize) {\r\n            newSizePixelA += newSizePixelB;\r\n            newSizePixelB = 0;\r\n        }\r\n\r\n        // ¤ AREAS SIZE PERCENT\r\n\r\n        if(newSizePixelA === 0) {\r\n            areaB.size += areaA.size;\r\n            areaA.size = 0;\r\n        }\r\n        else if(newSizePixelB === 0) {\r\n            areaA.size += areaB.size;\r\n            areaB.size = 0;\r\n        }\r\n        else {\r\n            // NEW_PERCENT = START_PERCENT / START_PIXEL * NEW_PIXEL;\r\n            if(this.dragStartValues.sizePercentA === 0) {\r\n                areaB.size = this.dragStartValues.sizePercentB / this.dragStartValues.sizePixelB * newSizePixelB;\r\n                areaA.size = this.dragStartValues.sizePercentB - areaB.size;\r\n            }\r\n            else if(this.dragStartValues.sizePercentB === 0) {\r\n                areaA.size = this.dragStartValues.sizePercentA / this.dragStartValues.sizePixelA * newSizePixelA;\r\n                areaB.size = this.dragStartValues.sizePercentA - areaA.size;\r\n            }\r\n            else {\r\n                areaA.size = this.dragStartValues.sizePercentA / this.dragStartValues.sizePixelA * newSizePixelA;\r\n                areaB.size = (this.dragStartValues.sizePercentA + this.dragStartValues.sizePercentB) - areaA.size;\r\n            }\r\n        }\r\n\r\n        this.refreshStyleSizes();\r\n        this.notify('progress');\r\n    }\r\n\r\n    private stopDragging(): void {\r\n        if(this.isDragging === false && this.draggingWithoutMove === false) {\r\n            return;\r\n        }\r\n\r\n        this.displayedAreas.forEach(area => {\r\n            area.comp.unlockEvents();\r\n        });\r\n\r\n        while(this.dragListeners.length > 0) {\r\n            const fct = this.dragListeners.pop();\r\n            if(fct) {\r\n                fct();\r\n            }\r\n        }\r\n        \r\n        if(this.draggingWithoutMove === true) {\r\n            this.notify('click');\r\n        }\r\n        else {\r\n            this.notify('end');\r\n        }\r\n\r\n        this.isDragging = false;\r\n        this.draggingWithoutMove = false;\r\n    }\r\n\r\n\r\n    public notify(type: 'start' | 'progress' | 'end' | 'click' | 'transitionEnd'): void {\r\n        const areasSize: Array<number> = this.displayedAreas.map(a => a.size * 100);\r\n\r\n        switch(type) {\r\n            case 'start':\r\n                return this.dragStart.emit({gutterNum: this.currentGutterNum, sizes: areasSize});\r\n\r\n            case 'progress':\r\n                return this.dragProgress.emit({gutterNum: this.currentGutterNum, sizes: areasSize});\r\n\r\n            case 'end':\r\n                return this.dragEnd.emit({gutterNum: this.currentGutterNum, sizes: areasSize});\r\n                \r\n            case 'click':\r\n                return this.gutterClick.emit({gutterNum: this.currentGutterNum, sizes: areasSize});\r\n\r\n            case 'transitionEnd':\r\n                return this.transitionEndInternal.next(areasSize);\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.stopDragging();\r\n    }\r\n}\r\n","import { Directive, Input, ElementRef, Renderer2, OnInit, OnDestroy, NgZone } from '@angular/core';\r\n\r\nimport { SplitComponent } from './split.component';\r\n\r\n@Directive({\r\n    selector: 'split-area'\r\n})\r\nexport class SplitAreaDirective implements OnInit, OnDestroy {\r\n\r\n    private _order: number | null = null;\r\n\r\n    @Input() set order(v: number | null) {\r\n        v = Number(v);\r\n        this._order = !isNaN(v) ? v : null;\r\n\r\n        this.split.updateArea(this, true, false);\r\n    }\r\n    \r\n    get order(): number | null {\r\n        return this._order;\r\n    }\r\n\r\n    ////\r\n\r\n    private _size: number | null = null;\r\n\r\n    @Input() set size(v: number | null) {\r\n        v = Number(v);\r\n        this._size = (!isNaN(v) && v >= 0 && v <= 100) ? (v/100) : null;\r\n\r\n        this.split.updateArea(this, false, true);\r\n    }\r\n    \r\n    get size(): number | null {\r\n        return this._size;\r\n    }\r\n\r\n    ////\r\n\r\n    private _minSize: number = 0;\r\n\r\n    @Input() set minSize(v: number) {\r\n        v = Number(v);\r\n        this._minSize = (!isNaN(v) && v > 0 && v < 100) ? v/100 : 0;\r\n\r\n        this.split.updateArea(this, false, true);\r\n    }\r\n    \r\n    get minSize(): number {\r\n        return this._minSize;\r\n    }\r\n\r\n    ////\r\n\r\n    private _visible: boolean = true;\r\n\r\n    @Input() set visible(v: boolean) {\r\n        v = (typeof(v) === 'boolean') ? v : (v === 'false' ? false : true);\r\n        this._visible = v;\r\n\r\n        if(this.visible) { \r\n            this.split.showArea(this);\r\n        }\r\n        else {\r\n            this.split.hideArea(this);\r\n        }\r\n    }\r\n\r\n    get visible(): boolean {\r\n        return this._visible;\r\n    }\r\n\r\n    ////\r\n\r\n    private transitionListener: Function;\r\n    private readonly lockListeners: Array<Function> = [];\r\n\r\n    constructor(private ngZone: NgZone,\r\n                private elRef: ElementRef,\r\n                private renderer: Renderer2,\r\n                private split: SplitComponent) {}\r\n\r\n    public ngOnInit(): void {\r\n        this.split.addArea(this);\r\n\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-grow', '0');\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-shrink', '0');\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.transitionListener = this.renderer.listen(this.elRef.nativeElement, 'transitionend', (e: TransitionEvent) => this.onTransitionEnd(e));\r\n        });\r\n    }\r\n\r\n    public getSizePixel(prop: 'offsetWidth' | 'offsetHeight'): number {\r\n        return this.elRef.nativeElement[prop];\r\n    }\r\n\r\n    public setStyleVisibleAndDir(isVisible: boolean, isDragging: boolean, direction: 'horizontal' | 'vertical'): void {\r\n        if(isVisible === false) {\r\n            this.setStyleFlexbasis('0', isDragging);\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-x', 'hidden');\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-y', 'hidden');\r\n            \r\n            if(direction === 'vertical') {\r\n                this.renderer.setStyle(this.elRef.nativeElement, 'max-width', '0');\r\n            }\r\n        }\r\n        else {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-x', 'hidden');\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-y', 'auto');\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'max-width');\r\n        }\r\n\r\n        if(direction === 'horizontal') {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'height', '100%');\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'width');\r\n        }\r\n        else {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'width', '100%');\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'height');\r\n        }\r\n    }\r\n\r\n    public setStyleOrder(value: number): void {\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'order', value);\r\n    }\r\n    \r\n    public setStyleFlexbasis(value: string, isDragging: boolean): void {\r\n        // If component not yet initialized or gutter being dragged, disable transition\r\n        if(this.split.isViewInitialized === false || isDragging === true) {\r\n            this.setStyleTransition(false);\r\n        }\r\n        // Or use 'useTransition' to know if transition.\r\n        else {\r\n            this.setStyleTransition(this.split.useTransition);\r\n        }\r\n\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-basis', value);\r\n    }\r\n    \r\n    private setStyleTransition(useTransition: boolean): void {\r\n        if(useTransition) {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'transition', `flex-basis 0.3s`);\r\n        }\r\n        else {\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'transition');\r\n        }\r\n    }\r\n    \r\n    private onTransitionEnd(event: TransitionEvent): void {\r\n        // Limit only flex-basis transition to trigger the event\r\n        if(event.propertyName === 'flex-basis') {\r\n            this.split.notify('transitionEnd');\r\n        }\r\n    }\r\n    \r\n    public lockEvents(): void {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.lockListeners.push( this.renderer.listen(this.elRef.nativeElement, 'selectstart', (e: Event) => false) );\r\n            this.lockListeners.push( this.renderer.listen(this.elRef.nativeElement, 'dragstart', (e: Event) => false) );\r\n        });\r\n    }\r\n\r\n    public unlockEvents(): void {\r\n        while(this.lockListeners.length > 0) {\r\n            const fct = this.lockListeners.pop();\r\n            if(fct) {\r\n                fct();\r\n            }\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.unlockEvents();\r\n\r\n        if(this.transitionListener) {\r\n            this.transitionListener();\r\n        }\r\n\r\n        this.split.removeArea(this);\r\n    }\r\n}\r\n","import { Directive, Input, ElementRef, Renderer2 } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: 'split-gutter'\r\n})\r\nexport class SplitGutterDirective {\r\n\r\n    @Input() set order(v: number) {\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'order', v);\r\n    }\r\n    \r\n    ////\r\n\r\n    private _direction: 'vertical' | 'horizontal';\r\n    \r\n    @Input() set direction(v: 'vertical' | 'horizontal') {\r\n        this._direction = v;\r\n        this.refreshStyle();\r\n    }\r\n    \r\n    get direction(): 'vertical' | 'horizontal' {\r\n        return this._direction;\r\n    }\r\n    \r\n    ////\r\n\r\n    @Input() set useTransition(v: boolean) {\r\n        if(v) {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'transition', `flex-basis 0.3s`);\r\n        }\r\n        else {\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'transition');\r\n        }\r\n    }\r\n    \r\n    ////\r\n\r\n    private _size: number;\r\n    \r\n    @Input() set size(v: number) {\r\n        this._size = v;\r\n        this.refreshStyle();\r\n    }\r\n    \r\n    get size(): number {\r\n        return this._size;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _color: string;\r\n\r\n    @Input() set color(v: string) {\r\n        this._color = v;\r\n        this.refreshStyle();\r\n    }\r\n    \r\n    get color(): string {\r\n        return this._color;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _imageH: string;\r\n\r\n    @Input() set imageH(v: string) {\r\n        this._imageH = v;\r\n        this.refreshStyle();\r\n    }\r\n    \r\n    get imageH(): string {\r\n        return this._imageH;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _imageV: string;\r\n\r\n    @Input() set imageV(v: string) {\r\n        this._imageV = v;\r\n        this.refreshStyle();\r\n    }\r\n    \r\n    get imageV(): string {\r\n        return this._imageV;\r\n    }\r\n    \r\n    ////\r\n\r\n    private _disabled: boolean = false;\r\n\r\n    @Input() set disabled(v: boolean) {\r\n        this._disabled = v;\r\n        this.refreshStyle();\r\n    }\r\n    \r\n    get disabled(): boolean {\r\n        return this._disabled;\r\n    }\r\n    \r\n    ////\r\n\r\n    constructor(private elRef: ElementRef,\r\n                private renderer: Renderer2) {}\r\n\r\n    private refreshStyle(): void {\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-basis', `${ this.size }px`);\r\n        \r\n        // fix safari bug about gutter height when direction is horizontal\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'height', (this.direction === 'vertical') ? `${ this.size }px` : `100%`);\r\n\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'background-color', (this.color !== '') ? this.color : `#eeeeee`);\r\n\r\n        const state: 'disabled' | 'vertical' | 'horizontal' = (this.disabled === true) ? 'disabled' : this.direction;\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'background-image', this.getImage(state));\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'cursor', this.getCursor(state));\r\n    }\r\n    \r\n    private getCursor(state: 'disabled' | 'vertical' | 'horizontal'): string {\r\n        switch(state) {\r\n            case 'horizontal':\r\n                return 'col-resize';\r\n            \r\n            case 'vertical':\r\n                return 'row-resize';\r\n            \r\n            case 'disabled':\r\n                return 'default';\r\n        }\r\n    }\r\n    \r\n    private getImage(state: 'disabled' | 'vertical' | 'horizontal'): string {\r\n        switch(state) {\r\n            case 'horizontal':\r\n                return (this.imageH !== '') ? this.imageH : defaultImageH; \r\n\r\n            case 'vertical':\r\n                return (this.imageV !== '') ? this.imageV : defaultImageV;\r\n            \r\n            case 'disabled':\r\n                return '';\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst defaultImageH = 'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==\")';\r\nconst defaultImageV = 'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC\")';\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { SplitComponent } from '../components/split.component';\r\nimport { SplitAreaDirective } from '../components/splitArea.directive';\r\nimport { SplitGutterDirective } from '../components/splitGutter.directive';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    declarations: [\r\n        SplitComponent,\r\n        SplitAreaDirective,\r\n        SplitGutterDirective,\r\n    ],\r\n    exports: [\r\n        SplitComponent,\r\n        SplitAreaDirective,\r\n    ]\r\n})\r\nexport class AngularSplitModule {\r\n\r\n    public static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: AngularSplitModule,\r\n            providers: []\r\n        };\r\n    }\r\n\r\n    public static forChild(): ModuleWithProviders {\r\n        return {\r\n            ngModule: AngularSplitModule,\r\n            providers: []\r\n        };\r\n    }\r\n\r\n}\r\n"],"names":["Subject"],"mappings":";;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;;;;;;;IAsMI,YAAoB,MAAc,EACd,OACA,OACA;QAHA,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK;QACL,UAAK,GAAL,KAAK;QACL,aAAQ,GAAR,QAAQ;0BAvMoB,YAAY;8BAmB1B,KAAK;yBAaV,KAAK;sBAgBF,IAAI;uBAeH,IAAI;2BAeP,EAAE;4BAeD,EAAE;6BAeD,EAAE;6BAeF,EAAE;oBAeJ,KAAK;yBAab,IAAI,YAAY,CAA4C,KAAK,CAAC;4BAC/D,IAAI,YAAY,CAA4C,KAAK,CAAC;uBACvE,IAAI,YAAY,CAA4C,KAAK,CAAC;2BAC9D,IAAI,YAAY,CAA4C,KAAK,CAAC;qCAE1D,IAAIA,SAAO,EAAiB;6BAClC,mBAA6B,IAAI,CAAC,qBAAqB,CAAC,YAAY,EAAE,GAAE,YAAY,CAAC,EAAE,CAAC;iCAsB9E,KAAK;0BACX,KAAK;mCACI,KAAK;gCACT,CAAC;8BAEW,EAAE;0BACL,EAAE;6BAEI,EAAE;+BACjB;YAC/B,kBAAkB,EAAE,CAAC;YACrB,UAAU,EAAE,CAAC;YACb,UAAU,EAAE,CAAC;YACb,YAAY,EAAE,CAAC;YACf,YAAY,EAAE,CAAC;SAClB;KAK0C;;;;;QArM9B,SAAS,CAAC,CAA4B;QAC/C,CAAC,GAAG,CAAC,CAAC,KAAK,UAAU,IAAI,UAAU,GAAG,YAAY,CAAC;QACnD,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QAEpB,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI;YACrD,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SACvF,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;;;;IAG7B,IAAI,SAAS;QACT,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;;;;;QAMY,aAAa,CAAC,CAAU;QACjC,CAAC,GAAG,CAAC,QAAO,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;;;;;IAG5B,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,cAAc,CAAC;KAC9B;;;;;QAMY,QAAQ,CAAC,CAAU;QAC5B,CAAC,GAAG,CAAC,QAAO,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;;QAGnB,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;;;;;IAG9B,IAAI,QAAQ;QACR,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;;;;;QAMY,KAAK,CAAC,CAAgB;QAC/B,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;QAE9C,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;;;;IAG7B,IAAI,KAAK;QACL,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;;;;;QAMY,MAAM,CAAC,CAAgB;QAChC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACd,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;QAE/C,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;;;;IAG7B,IAAI,MAAM;QACN,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;;;;;QAMY,UAAU,CAAC,CAAS;QAC7B,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACd,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QAEjD,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;;;;IAG7B,IAAI,UAAU;QACV,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;;;;;QAMY,WAAW,CAAC,CAAS;QAC9B,IAAI,CAAC,YAAY,GAAG,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;;QAGjE,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;;;;;IAG9B,IAAI,WAAW;QACX,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;;;;;QAMY,YAAY,CAAC,CAAS;QAC/B,IAAI,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;;QAGlE,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;;;;;IAG9B,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;;;;;QAMY,YAAY,CAAC,CAAS;QAC/B,IAAI,CAAC,aAAa,GAAG,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;;QAGlE,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;;;;;IAG9B,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;;;;;QAMY,GAAG,CAAC,CAAgB;QAC7B,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK,IAAI,KAAK,GAAG,KAAK,CAAC;QAClC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;;;;;IAGlB,IAAI,GAAG;QACH,OAAO,IAAI,CAAC,IAAI,CAAC;KACpB;;;;QAYwC,gBAAgB;QACrD,OAAO,CAAC,IAAI,CAAC,SAAS,KAAK,YAAY,IAAI,KAAK,GAAG,QAAQ,CAAC;;;;;QAGhC,QAAQ;QACpC,OAAO,IAAI,CAAC,KAAK,GAAG,GAAI,IAAI,CAAC,KAAM,IAAI,GAAG,MAAM,CAAC;;;;;QAGpB,SAAS;QACtC,OAAO,IAAI,CAAC,MAAM,GAAG,GAAI,IAAI,CAAC,MAAO,IAAI,GAAG,MAAM,CAAC;;;;;QAGnB,WAAW;QAC3C,OAAO,CAAC,IAAI,CAAC,SAAS,KAAK,YAAY,IAAI,GAAI,IAAI,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,UAAW,IAAI,GAAG,IAAI,CAAC;;;;;QAGhE,YAAY;QAC7C,OAAO,CAAC,IAAI,CAAC,SAAS,KAAK,UAAU,IAAI,GAAI,IAAI,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,UAAW,IAAI,GAAG,IAAI,CAAC;;;;;IAyB5F,eAAe;QAClB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;;;;;IAG1B,YAAY;QAChB,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;;;;;;IAGnC,OAAO,CAAC,IAAwB;QACnC,uBAAM,OAAO,GAAU;YACnB,IAAI;YACJ,KAAK,EAAE,CAAC;YACR,IAAI,EAAE,CAAC;SACV,CAAC;QAEF,IAAG,IAAI,CAAC,OAAO,KAAK,IAAI,EAAE;YACtB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACrC;aACI;YACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACjC;QAED,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAE1E,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;;;;;IAGpB,UAAU,CAAC,IAAwB;QACtC,IAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE;YAC/C,uBAAM,IAAI,qBAAW,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAA,CAAA;YACnE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;YAEjE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC1B;aACI,IAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE;YAChD,uBAAM,IAAI,qBAAW,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAA,CAAA;YAC/D,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;SAC5D;;;;;;;;IAGE,UAAU,CAAC,IAAwB,EAAE,WAAoB,EAAE,UAAmB;;QAEjF,uBAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;QAE5D,IAAG,IAAI,EAAE;YACL,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;SACvC;;;;;;IAGE,QAAQ,CAAC,IAAwB;QACpC,uBAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;QAExD,IAAG,IAAI,EAAE;YACL,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAE1E,uBAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;YAEnC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC1B;;;;;;IAGE,QAAQ,CAAC,IAAwB;QACpC,uBAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;QAE5D,IAAG,IAAI,EAAE;YACL,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAE1E,uBAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;YAC/E,KAAK,CAAC,OAAO,CAAC,IAAI;gBACd,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBACf,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;aACjB,CAAC,CAAA;YACF,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;YAE/B,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC1B;;;;;;;IAGG,KAAK,CAAC,WAAoB,EAAE,UAAmB;QACnD,IAAI,CAAC,YAAY,EAAE,CAAC;;QAIpB,IAAG,WAAW,KAAK,IAAI,EAAE;;YAGrB,IAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,EAAE;gBACtD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,mBAAU,CAAC,CAAC,IAAI,CAAC,KAAK,wBAAc,CAAC,CAAC,IAAI,CAAC,KAAK,EAAC,CAAC,CAAC;aACzF;;YAGD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;gBAChC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACvC,CAAC,CAAC;SAEN;;QAID,IAAG,UAAU,KAAK,IAAI,EAAE;YAEpB,uBAAM,aAAa,qBAAY,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,KAAa,EAAE,CAAQ,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,EAAE,CAAC,CAAC,CAAA,CAAC;;YAGrI,IAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,aAAa,GAAG,IAAI,IAAI,aAAa,GAAG,KAAM,EAAE;gBAEvG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI;oBAC5B,IAAI,CAAC,IAAI,qBAAY,IAAI,CAAC,IAAI,CAAC,IAAI,CAAA,CAAC;iBACvC,CAAC,CAAC;aACN;iBAEI;gBACD,uBAAM,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;gBAE5C,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI;oBAC5B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;iBACpB,CAAC,CAAC;aACN;SACJ;;;;QAMD,qBAAI,iBAAiB,GAAG,CAAC,CAAC;;QAG1B,qBAAI,kBAAkB,GAAG,IAAI,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QAC/D,IAAG,IAAI,CAAC,SAAS,KAAK,YAAY,EAAE;YAChC,kBAAkB,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;SAC1F;aACI;YACD,kBAAkB,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;SAC7F;QAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI;YAC5B,IAAG,IAAI,CAAC,IAAI,GAAG,kBAAkB,GAAG,IAAI,CAAC,UAAU,EAAE;gBACjD,iBAAiB,IAAI,IAAI,CAAC,IAAI,CAAC;gBAC/B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;aACjB;SACJ,CAAC,CAAC;QAEH,IAAG,iBAAiB,GAAG,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YACxD,uBAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC;YAE5E,IAAG,cAAc,GAAG,CAAC,EAAE;gBACnB,uBAAM,YAAY,GAAG,iBAAiB,GAAG,cAAc,CAAC;gBAExD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI;oBACtD,IAAI,CAAC,IAAI,IAAI,YAAY,CAAC;iBAC7B,CAAC,CAAC;aACN;iBAGI;gBACD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;aAChE;SACJ;QAGD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;;;;;IAGtB,iBAAiB;QACrB,uBAAM,aAAa,GAAG,IAAI,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QAE5D,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI;YAC5B,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAU,IAAI,CAAC,IAAI,GAAG,GAAI,OAAQ,IAAI,CAAC,IAAI,GAAG,aAAc,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;SACpH,CAAC,CAAC;;;;;;;;IAGA,aAAa,CAAC,UAAmC,EAAE,WAAmB,EAAE,SAAiB;QAC5F,UAAU,CAAC,cAAc,EAAE,CAAC;;QAG5B,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;QAClC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,SAAS,EAAE,CAAC,CAAa,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC,CAAE,CAAC;YAC/G,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,UAAU,EAAE,CAAC,CAAa,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC,CAAE,CAAC;YAChH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,aAAa,EAAE,CAAC,CAAa,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC,CAAE,CAAC;SACtH,CAAC,CAAC;QAEH,IAAG,IAAI,CAAC,QAAQ,EAAE;YACd,OAAO;SACV;QAED,uBAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,WAAW,GAAG,CAAC,CAAC,CAAC;QACzE,uBAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,WAAW,GAAG,CAAC,CAAC,CAAC;QAEzE,IAAG,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;YACjB,OAAO;SACV;QAED,uBAAM,IAAI,GAAG,CAAC,IAAI,CAAC,SAAS,KAAK,YAAY,IAAI,aAAa,GAAG,cAAc,CAAC;QAChF,IAAI,CAAC,eAAe,CAAC,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACzE,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC;QAC/C,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC;QAE/C,qBAAI,KAAa,CAAC;QAClB,IAAG,UAAU,YAAY,UAAU,EAAE;YACjC,KAAK,GAAG;gBACJ,CAAC,EAAE,UAAU,CAAC,OAAO;gBACrB,CAAC,EAAE,UAAU,CAAC,OAAO;aACxB,CAAC;SACL;aACI,IAAG,UAAU,YAAY,UAAU,EAAE;YACtC,KAAK,GAAG;gBACJ,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;gBAChC,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;aACnC,CAAC;SACL;aACI;YACD,OAAO;SACV;QAED,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,WAAW,EAAE,CAAC,CAAa,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC;YACpI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,WAAW,EAAE,CAAC,CAAa,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC;SACvI,CAAC,CAAC;QAEH,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QACxB,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QAExB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;;;;;;;;IAGjB,SAAS,CAAC,KAA8B,EAAE,KAAa,EAAE,KAAY,EAAE,KAAY;QACvF,IAAG,CAAC,IAAI,CAAC,UAAU,EAAE;YACjB,OAAO;SACV;QAED,qBAAI,GAAW,CAAC;QAChB,IAAG,KAAK,YAAY,UAAU,EAAE;YAC5B,GAAG,GAAG;gBACF,CAAC,EAAE,KAAK,CAAC,OAAO;gBAChB,CAAC,EAAE,KAAK,CAAC,OAAO;aACnB,CAAC;SACL;aACI,IAAG,KAAK,YAAY,UAAU,EAAE;YACjC,GAAG,GAAG;gBACF,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;gBAC3B,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;aAC9B,CAAC;SACL;aACI;YACD,OAAO;SACV;QAED,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;;;;;;;;;IAGhC,IAAI,CAAC,KAAa,EAAE,GAAW,EAAE,KAAY,EAAE,KAAY;;QAI/D,uBAAM,gBAAgB,GAAG,MAAM,CAAC,gBAAgB,IAAI,CAAC,CAAC;QACtD,qBAAI,WAAW,GAAG,CAAC,IAAI,CAAC,SAAS,KAAK,YAAY,KAAK,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5F,WAAW,GAAG,WAAW,GAAG,gBAAgB,CAAC;QAE7C,IAAG,IAAI,CAAC,GAAG,KAAK,KAAK,EAAE;YACnB,WAAW,GAAG,CAAC,WAAW,CAAC;SAC9B;QAED,qBAAI,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,WAAW,CAAC;QAClE,qBAAI,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,WAAW,CAAC;QAClE,qBAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QAC9C,qBAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QAElC,IAAG,aAAa,GAAG,IAAI,CAAC,UAAU,IAAI,aAAa,GAAG,IAAI,CAAC,UAAU,EAAE;;YAEnE,OAAO;SACV;aAEI,IAAI,aAAa,GAAG,QAAQ,EAAE;YACxC,aAAa,IAAI,aAAa,GAAG,QAAQ,CAAC;YAC1C,aAAa,GAAG,QAAQ,CAAC;SACzB;aACI,IAAI,aAAa,GAAG,QAAQ,EAAE;YAClC,aAAa,IAAI,aAAa,GAAG,QAAQ,CAAC;YAC1C,aAAa,GAAG,QAAQ,CAAC;SACzB;aAGU,IAAG,aAAa,GAAG,IAAI,CAAC,UAAU,EAAE;YACrC,aAAa,IAAI,aAAa,CAAC;YAC/B,aAAa,GAAG,CAAC,CAAC;SACrB;aACI,IAAG,aAAa,GAAG,IAAI,CAAC,UAAU,EAAE;YACrC,aAAa,IAAI,aAAa,CAAC;YAC/B,aAAa,GAAG,CAAC,CAAC;SACrB;;QAID,IAAG,aAAa,KAAK,CAAC,EAAE;YACpB,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC;YACzB,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;SAClB;aACI,IAAG,aAAa,KAAK,CAAC,EAAE;YACzB,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC;YACzB,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;SAClB;aACI;;YAED,IAAG,IAAI,CAAC,eAAe,CAAC,YAAY,KAAK,CAAC,EAAE;gBACxC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,aAAa,CAAC;gBACjG,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC;aAC/D;iBACI,IAAG,IAAI,CAAC,eAAe,CAAC,YAAY,KAAK,CAAC,EAAE;gBAC7C,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,aAAa,CAAC;gBACjG,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC;aAC/D;iBACI;gBACD,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,aAAa,CAAC;gBACjG,KAAK,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,IAAI,KAAK,CAAC,IAAI,CAAC;aACrG;SACJ;QAED,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;;;;IAGpB,YAAY;QAChB,IAAG,IAAI,CAAC,UAAU,KAAK,KAAK,IAAI,IAAI,CAAC,mBAAmB,KAAK,KAAK,EAAE;YAChE,OAAO;SACV;QAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI;YAC5B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;SAC5B,CAAC,CAAC;QAEH,OAAM,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,uBAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;YACrC,IAAG,GAAG,EAAE;gBACJ,GAAG,EAAE,CAAC;aACT;SACJ;QAED,IAAG,IAAI,CAAC,mBAAmB,KAAK,IAAI,EAAE;YAClC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACxB;aACI;YACD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SACtB;QAED,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;;;;;;IAI9B,MAAM,CAAC,IAA8D;QACxE,uBAAM,SAAS,GAAkB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;QAE5E,QAAO,IAAI;YACP,KAAK,OAAO;gBACR,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC,CAAC;YAErF,KAAK,UAAU;gBACX,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC,CAAC;YAExF,KAAK,KAAK;gBACN,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC,CAAC;YAEnF,KAAK,OAAO;gBACR,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC,CAAC;YAEvF,KAAK,eAAe;gBAChB,OAAO,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACzD;;;;;IAGE,WAAW;QACd,IAAI,CAAC,YAAY,EAAE,CAAC;;;;YAnnB3B,SAAS,SAAC;gBACP,QAAQ,EAAE,OAAO;gBACjB,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAC/C,MAAM,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;KAuBR,CAAC;gBACF,QAAQ,EAAE;;;;;;;;;;;;;;uBAcS;aACtB;;;;YAnFkE,MAAM;YAAjC,UAAU;YAD9B,iBAAiB;YACnB,SAAS;;;0BAwFtB,KAAK;8BAmBL,KAAK;yBAaL,KAAK;sBAgBL,KAAK;uBAeL,KAAK;2BAeL,KAAK;4BAeL,KAAK;6BAeL,KAAK;6BAeL,KAAK;oBAeL,KAAK;0BAWL,MAAM;6BACN,MAAM;wBACN,MAAM;4BACN,MAAM;8BAGN,MAAM;iCAEN,WAAW,SAAC,sBAAsB;yBAIlC,WAAW,SAAC,aAAa;0BAIzB,WAAW,SAAC,cAAc;4BAI1B,WAAW,SAAC,iBAAiB;6BAI7B,WAAW,SAAC,kBAAkB;;;;;;;ACtQnC;;;;;;;IA6EI,YAAoB,MAAc,EACd,OACA,UACA;QAHA,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK;QACL,aAAQ,GAAR,QAAQ;QACR,UAAK,GAAL,KAAK;sBAvEO,IAAI;qBAeL,IAAI;wBAeR,CAAC;wBAeA,IAAI;6BAqBkB,EAAE;KAKP;;;;;QArEhC,KAAK,CAAC,CAAgB;QAC/B,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;;;;;IAG7C,IAAI,KAAK;QACL,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;;;;;QAMY,IAAI,CAAC,CAAgB;QAC9B,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACd,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAC,GAAG,IAAI,IAAI,CAAC;QAEhE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;;;;;IAG7C,IAAI,IAAI;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;;;;;QAMY,OAAO,CAAC,CAAS;QAC1B,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACd,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAC,GAAG,GAAG,CAAC,CAAC;QAE5D,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;;;;;IAG7C,IAAI,OAAO;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;;;;;QAMY,OAAO,CAAC,CAAU;QAC3B,CAAC,GAAG,CAAC,QAAO,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAElB,IAAG,IAAI,CAAC,OAAO,EAAE;YACb,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAC7B;aACI;YACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAC7B;;;;;IAGL,IAAI,OAAO;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;;;;IAYM,QAAQ;QACX,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAEzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,aAAa,EAAE,GAAG,CAAC,CAAC;QAErE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC1B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,eAAe,EAAE,CAAC,CAAkB,KAAK,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9I,CAAC,CAAC;;;;;;IAGA,YAAY,CAAC,IAAoC;QACpD,OAAO,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;;;;;;;;IAGnC,qBAAqB,CAAC,SAAkB,EAAE,UAAmB,EAAE,SAAoC;QACtG,IAAG,SAAS,KAAK,KAAK,EAAE;YACpB,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;YACxC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;YAEzE,IAAG,SAAS,KAAK,UAAU,EAAE;gBACzB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC;aACtE;SACJ;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC;YACvE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;SACpE;QAED,IAAG,SAAS,KAAK,YAAY,EAAE;YAC3B,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;YACnE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;SAChE;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;YAClE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;SACjE;;;;;;IAGE,aAAa,CAAC,KAAa;QAC9B,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;;;;;;;IAG9D,iBAAiB,CAAC,KAAa,EAAE,UAAmB;;QAEvD,IAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,KAAK,KAAK,IAAI,UAAU,KAAK,IAAI,EAAE;YAC9D,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;SAClC;aAEI;YACD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;SACrD;QAED,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;;;;;;IAGlE,kBAAkB,CAAC,aAAsB;QAC7C,IAAG,aAAa,EAAE;YACd,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,iBAAiB,CAAC,CAAC;SACrF;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,CAAC,CAAC;SACrE;;;;;;IAGG,eAAe,CAAC,KAAsB;;QAE1C,IAAG,KAAK,CAAC,YAAY,KAAK,YAAY,EAAE;YACpC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;SACtC;;;;;IAGE,UAAU;QACb,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,aAAa,EAAE,CAAC,CAAQ,KAAK,KAAK,CAAC,CAAE,CAAC;YAC9G,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,WAAW,EAAE,CAAC,CAAQ,KAAK,KAAK,CAAC,CAAE,CAAC;SAC/G,CAAC,CAAC;;;;;IAGA,YAAY;QACf,OAAM,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,uBAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;YACrC,IAAG,GAAG,EAAE;gBACJ,GAAG,EAAE,CAAC;aACT;SACJ;;;;;IAGE,WAAW;QACd,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAG,IAAI,CAAC,kBAAkB,EAAE;YACxB,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC7B;QAED,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;;;;YA/KnC,SAAS,SAAC;gBACP,QAAQ,EAAE,YAAY;aACzB;;;;YANoE,MAAM;YAAhD,UAAU;YAAE,SAAS;YAEvC,cAAc;;;sBASlB,KAAK;qBAeL,KAAK;wBAeL,KAAK;wBAeL,KAAK;;;;;;;ACxDV;;;;;IAsGI,YAAoB,KAAiB,EACjB;QADA,UAAK,GAAL,KAAK,CAAY;QACjB,aAAQ,GAAR,QAAQ;yBAdC,KAAK;KAcS;;;;;QAhG9B,KAAK,CAAC,CAAS;QACxB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;;;;;;QAOpD,SAAS,CAAC,CAA4B;QAC/C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,YAAY,EAAE,CAAC;;;;;IAGxB,IAAI,SAAS;QACT,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;;;;;QAIY,aAAa,CAAC,CAAU;QACjC,IAAG,CAAC,EAAE;YACF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,iBAAiB,CAAC,CAAC;SACrF;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,CAAC,CAAC;SACrE;;;;;;QAOQ,IAAI,CAAC,CAAS;QACvB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,YAAY,EAAE,CAAC;;;;;IAGxB,IAAI,IAAI;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;;;;;QAMY,KAAK,CAAC,CAAS;QACxB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,YAAY,EAAE,CAAC;;;;;IAGxB,IAAI,KAAK;QACL,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;;;;;QAMY,MAAM,CAAC,CAAS;QACzB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,YAAY,EAAE,CAAC;;;;;IAGxB,IAAI,MAAM;QACN,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;;;;;QAMY,MAAM,CAAC,CAAS;QACzB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,YAAY,EAAE,CAAC;;;;;IAGxB,IAAI,MAAM;QACN,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;;;;;QAMY,QAAQ,CAAC,CAAU;QAC5B,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,YAAY,EAAE,CAAC;;;;;IAGxB,IAAI,QAAQ;QACR,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;;;;IAOO,YAAY;QAChB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,YAAY,EAAE,GAAI,IAAI,CAAC,IAAK,IAAI,CAAC,CAAC;;QAGnF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,SAAS,KAAK,UAAU,IAAI,GAAI,IAAI,CAAC,IAAK,IAAI,GAAG,MAAM,CAAC,CAAC;QAE1H,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,kBAAkB,EAAE,CAAC,IAAI,CAAC,KAAK,KAAK,EAAE,IAAI,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,CAAC;QAEnH,uBAAM,KAAK,GAA2C,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;QAC7G,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,kBAAkB,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QAC3F,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;;;;;;IAG9E,SAAS,CAAC,KAA6C;QAC3D,QAAO,KAAK;YACR,KAAK,YAAY;gBACb,OAAO,YAAY,CAAC;YAExB,KAAK,UAAU;gBACX,OAAO,YAAY,CAAC;YAExB,KAAK,UAAU;gBACX,OAAO,SAAS,CAAC;SACxB;;;;;;IAGG,QAAQ,CAAC,KAA6C;QAC1D,QAAO,KAAK;YACR,KAAK,YAAY;gBACb,OAAO,CAAC,IAAI,CAAC,MAAM,KAAK,EAAE,IAAI,IAAI,CAAC,MAAM,GAAG,aAAa,CAAC;YAE9D,KAAK,UAAU;gBACX,OAAO,CAAC,IAAI,CAAC,MAAM,KAAK,EAAE,IAAI,IAAI,CAAC,MAAM,GAAG,aAAa,CAAC;YAE9D,KAAK,UAAU;gBACX,OAAO,EAAE,CAAC;SACjB;;;;YA3IR,SAAS,SAAC;gBACP,QAAQ,EAAE,cAAc;aAC3B;;;;YAJ0B,UAAU;YAAE,SAAS;;;sBAO3C,KAAK;0BAQL,KAAK;8BAWL,KAAK;qBAaL,KAAK;sBAaL,KAAK;uBAaL,KAAK;uBAaL,KAAK;yBAaL,KAAK;;MAuDJ,aAAa,GAAG,2JAA2J,CAAC;AAClL,MAAM,aAAa,GAAG,+KAA+K;;;;;;ACnJrM;;;;IAuBW,OAAO,OAAO;QACjB,OAAO;YACH,QAAQ,EAAE,kBAAkB;YAC5B,SAAS,EAAE,EAAE;SAChB,CAAC;;;;;IAGC,OAAO,QAAQ;QAClB,OAAO;YACH,QAAQ,EAAE,kBAAkB;YAC5B,SAAS,EAAE,EAAE;SAChB,CAAC;;;;YA3BT,QAAQ,SAAC;gBACN,OAAO,EAAE;oBACL,YAAY;iBACf;gBACD,YAAY,EAAE;oBACV,cAAc;oBACd,kBAAkB;oBAClB,oBAAoB;iBACvB;gBACD,OAAO,EAAE;oBACL,cAAc;oBACd,kBAAkB;iBACrB;aACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;"}